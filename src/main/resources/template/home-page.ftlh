<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>–ì–ª–∞–≤–Ω–∞—è</title>
    <link rel="stylesheet" href="${contextPath}/static/css/home-page.css">
</head>
<body>

<div class="page-wrapper">
    <nav class="sidebar-nav">
        <form action="${contextPath}/home" method="post">
            <button type="submit">üè†</button>
        </form>
        <form action="${contextPath}/logout" method="post">
            <button type="submit">üö™</button>
        </form>
        <form action="${contextPath}/account" method="get">
            <button type="submit">üë§</button>
        </form>
    </nav>

    <main class="content-wrapper">
        <section class="top-panel">
            <input type="text" id="searchInput" placeholder="–ü–æ–∏—Å–∫ —Ç—Ä–µ–∫–æ–≤">
            <select id="sortSelect">
                <option value="updated" selected>–°–Ω–∞—á–∞–ª–∞ –Ω–æ–≤—ã–µ</option>
                <option value="alphabet">–ü–æ –∞–ª—Ñ–∞–≤–∏—Ç—É</option>
                <option value="created">–ü–æ –≤—Ä–µ–º–µ–Ω–∏ —Å–æ–∑–¥–∞–Ω–∏—è</option>
            </select>

            <div class="tags-filter">
                <select id="tagSelect">
                    <option value="">–í—ã–±–µ—Ä–∏—Ç–µ —Ç–µ–≥</option>
                    <#list allTags as tag>
                        <option value="${tag.id}" data-color="${tag.color!'#888'}">${tag.name}</option>
                    </#list>
                </select>
                <div id="selectedTags"></div>
            </div>
        </section>

        <section class="tracks-grid">
            <div class="track-card new-track">

            <div class="cover-container">
                    <div class="cover-placeholder">Ôºã</div>
                </div>
                <div class="track-info">
                    <div class="track-title">–ù–æ–≤—ã–π —Ç—Ä–µ–∫</div>
                    <div class="audio-placeholder small">–°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π —Ç—Ä–µ–∫!</div>
                </div>
            </div>

            <#list userTracks as track>
                <div class="track-card" data-track-id="${track.id}">
                    <div class="cover-container">
                        <#if track.imagePath?? && track.imagePath?has_content>
                            <img src="${contextPath}/files/${track.imagePath}" alt="${track.title!}" class="cover-image">
                        <#else>
                            <div class="cover-placeholder">–ù–µ—Ç –æ–±–ª–æ–∂–∫–∏</div>
                        </#if>
                        <button class="delete-track-btn">üóë</button>
                    </div>

                    <div class="track-info">
                        <div class="track-title">
                            <#if track.title?? && track.title?has_content>
                                ${track.title}
                            <#else>
                                –ë–µ–∑ –Ω–∞–∑–≤–∞–Ω–∏—è
                            </#if>
                        </div>



                        <#if track.audioPath?? && track.audioPath?has_content>
                            <audio controls src="${contextPath}/files/${track.audioPath}"></audio>
                        <#else>
                            <div class="audio-placeholder small">–ù–µ—Ç –∞—É–¥–∏–æ</div>
                        </#if>
                    </div>
                </div>
            </#list>

        </section>
    </main>

</div>

<div id="status"></div>

<script>
    const contextPath = '${contextPath}';
</script>
<script src="${contextPath}/static/js/home-page.js"></script>

</body>
</html>
